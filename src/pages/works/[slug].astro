---
import PlyrPreview from "../../components/PlyrPreview.astro"
import Layout from "../../layouts/Layout.astro"
import { works } from "../../content/works.js"
import RecentWorks from "../../components/RecentWorks.astro"

export function getStaticPaths() {
  return works.map(w => ({
    params: { slug: w.slug },
    props: { work: w },
  }))
}

const { work } = Astro.props
const recent = works.slice(0, 2)
---

<Layout>
  <main class="wp">
    <div class="wp-inner">
      <h1 class="wp-title">{work.title}</h1>

      <div class="wp-meta">
        <div class="wp-k">
          <div class="wp-val">{work.year}</div>
        </div>

        <div class="wp-k">
          <div class="wp-val">{work.category}</div>
        </div>

        <div class="wp-k">
          <div class="wp-val">{work.client}</div>
        </div>
      </div>

      <div class="wp-hero">
        <PlyrPreview mp4={work.preview.mp4} webm={work.preview.webm} poster={work.preview.poster} />
      </div>

      <section class="wp-overview">
        <p class="wp-lead">{work.overviewLead}</p>
        <p class="wp-body">{work.overviewBody}</p>
      </section>
    </div>
  </main>
  <RecentWorks items={recent} />

  <style>
    .wp {
      padding: 28px 0 96px;
      background: #000;
      font-family: var(--font-bebas, "Bebas Neue", sans-serif);
    }

    .wp-inner {
      max-width: 92rem;
      margin: 4rem auto 0;
      padding: 0 1.25rem;
    }

    .wp-title {
      margin: 0;
      font-size: clamp(3.4rem, 9vw, 7.2rem);
      line-height: 0.9;
      font-weight: 400;
      letter-spacing: 0.02em;
      color: rgba(255, 255, 255, 0.96);
      text-transform: uppercase;
    }

    .wp-meta {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 28px;
      margin-top: 28px;
      margin-bottom: 44px;
      max-width: 52rem;
    }

    .wp-label {
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.95rem;
      letter-spacing: 0.16em;
    }

    .wp-val {
      margin-top: 8px;
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.05rem;
      letter-spacing: 0.08em;
    }

    .wp-hero {
      margin-top: 10px;
      max-width: 82rem;
    }

    .wp-over-label {
      color: rgba(255, 255, 255, 0.55);
      letter-spacing: 0.18em;
      font-size: 0.95rem;
    }

    .wp-overview {
      margin-top: 72px;
      max-width: 64rem;
    }

    .wp-lead {
      margin: 16px 0 0 0;
      font-size: clamp(1.6rem, 2.4vw, 2.1rem);
      line-height: 1.3;
      color: rgba(255, 255, 255, 0.9);
      max-width: 48ch;
    }

    .wp-body {
      margin: 20px 0 0 0;
      font-family:
        ui-sans-serif,
        system-ui,
        -apple-system,
        BlinkMacSystemFont,
        sans-serif;
      color: rgba(255, 255, 255, 0.68);
      line-height: 1.75;
      max-width: 70ch;
      font-size: 1rem;
    }

    @media (max-width: 1000px) {
      .wp-meta {
        grid-template-columns: 1fr;
        max-width: none;
      }

      .wp-hero {
        max-width: none;
      }

      .wp-overview {
        max-width: none;
      }

      .wp-body {
        max-width: 65ch;
      }
    }
  </style>
</Layout>
