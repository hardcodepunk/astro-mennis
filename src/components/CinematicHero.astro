---
const {
  title = "Mennis",
  subtitle,
  primaryHref = "/portfolio",
  primaryLabel = "View Portfolio",
  secondaryHref = "/contact",
  secondaryLabel = "Book a Project",
  minRevealMs = 600,

  mp4 = "https://res.cloudinary.com/hardcodepunk/video/upload/q_auto:eco,vc_h264,ac_aac,f_mp4/v1737957147/wsuszohtmu2pks673muc.mp4",
  webm = "https://res.cloudinary.com/hardcodepunk/video/upload/q_auto:eco,vc_vp9,f_webm/v1761381373/b8f7chk3u9s6jaqh4bae.webm",
  poster = "https://res.cloudinary.com/hardcodepunk/video/upload/q_auto:eco,so_0,f_jpg,w_1600/v1737957147/wsuszohtmu2pks673muc.jpg",

  disableOnMobile = true,
} = Astro.props
---

<section class="vh-hero" data-min-reveal={minRevealMs} data-disable-mobile={disableOnMobile ? "1" : "0"}>
  <video class="vh-video" autoplay muted loop playsinline poster={poster} disableRemotePlayback aria-hidden="true">
    <source src={webm} type="video/webm" />
    <source src={mp4} type="video/mp4" />
  </video>

  <div class="vh-grad"></div>
  <div class="vh-overlay" aria-hidden="true"></div>

  <div class="vh-content">
    <div class="vh-inner">
      <h1 class="vh-title">{title}</h1>
      {subtitle ? <p class="vh-sub">{subtitle}</p> : null}
      <div class="vh-cta">
        <a href={primaryHref} class="vh-btn vh-btn-primary">{primaryLabel}</a>
        <a href={secondaryHref} class="vh-btn vh-btn-secondary">{secondaryLabel}</a>
      </div>
    </div>
  </div>

  <script is:inline>
    ;(() => {
      const root = document.querySelector(".vh-hero")
      if (!root) return

      const video = root.querySelector("video")
      if (!video) return

      const reveal = () => {
        root.classList.add("is-playing")
      }

      video.addEventListener("playing", reveal)
      video.addEventListener("loadeddata", reveal)

      setTimeout(reveal, 1500)
    })()
  </script>
</section>
