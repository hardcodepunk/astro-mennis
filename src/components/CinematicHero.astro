---
const {
  title = "Mennis",
  subtitle,
  primaryHref = "/portfolio",
  primaryLabel = "View Portfolio",
  secondaryHref = "/contact",
  secondaryLabel = "Book a Project",
  minRevealMs = 600,

  mp4 = "https://res.cloudinary.com/hardcodepunk/video/upload/q_auto:eco,vc_h264,ac_aac,f_mp4/v1737957147/wsuszohtmu2pks673muc.mp4",
  webm = "https://res.cloudinary.com/hardcodepunk/video/upload/q_auto:eco,vc_vp9,f_webm/v1761381373/b8f7chk3u9s6jaqh4bae.webm",
  poster = "https://res.cloudinary.com/hardcodepunk/video/upload/q_auto:eco,so_0,f_jpg,w_1600/v1737957147/wsuszohtmu2pks673muc.jpg",

  disableOnMobile = true,
} = Astro.props
---

<section class="vh-hero" data-min-reveal={minRevealMs} data-disable-mobile={disableOnMobile ? "1" : "0"}>
  <video class="vh-video" autoplay muted loop playsinline poster={poster} disableRemotePlayback aria-hidden="true">
    <source src={webm} type="video/webm" />
    <source src={mp4} type="video/mp4" />
  </video>

  <div class="vh-grad"></div>
  <div class="vh-overlay" aria-hidden="true"></div>

  <div class="vh-content">
    <div class="vh-inner">
      <h1 class="vh-title">{title}</h1>
      {subtitle ? <p class="vh-sub">{subtitle}</p> : null}
      <div class="vh-cta">
        <a href={primaryHref} class="vh-btn vh-btn-primary">{primaryLabel}</a>
        <a href={secondaryHref} class="vh-btn vh-btn-secondary">{secondaryLabel}</a>
      </div>
    </div>
  </div>

  <script is:inline>
    ;(() => {
      const root = document.querySelector(".vh-hero")
      if (!root) return

      const video = root.querySelector("video")
      if (!video) return

      const reveal = () => {
        root.classList.add("is-playing")
      }

      video.addEventListener("playing", reveal)
      video.addEventListener("loadeddata", reveal)

      setTimeout(reveal, 1500)
    })()
  </script>

  <style>
    .vh-hero {
      position: relative;
      height: 90vh;
      width: 100%;
      overflow: hidden;
      background: #000;
    }
    .vh-video {
      position: absolute;
      inset: 0;
      z-index: 0;
      height: 100%;
      width: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.8s ease-out;
    }
    .vh-grad {
      pointer-events: none;
      position: absolute;
      inset: 0;
      z-index: 10;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.3), transparent);
    }
    .vh-overlay {
      position: absolute;
      inset: 0;
      z-index: 10;
      background: rgba(0, 0, 0, 0.5);
      opacity: 1;
      transition: opacity 0.8s ease-out;
    }
    .vh-content {
      position: relative;
      z-index: 20;
      display: flex;
      height: 100%;
      max-width: 72rem;
      margin: 0 auto;
      align-items: center;
      padding: 0 1rem;
    }
    .vh-inner {
      opacity: 0;
      transform: translateY(18px);
      transition:
        opacity 0.8s ease-out,
        transform 0.8s ease-out;
    }
    .vh-title {
      font-size: clamp(2.25rem, 5vw, 3.75rem);
      line-height: 1.05;
      font-weight: 600;
      letter-spacing: -0.02em;
    }
    .vh-sub {
      margin-top: 1rem;
      max-width: 36rem;
      color: rgba(255, 255, 255, 0.9);
    }
    .vh-cta {
      margin-top: 2rem;
      display: flex;
      gap: 0.75rem;
    }
    .vh-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 0.375rem;
      padding: 0.5rem 1.25rem;
      font-weight: 500;
      transition:
        background-color 0.2s ease,
        color 0.2s ease,
        border-color 0.2s ease;
    }
    .vh-btn-primary {
      background: #f5f5f5;
      color: #000;
    }
    .vh-btn-primary:hover {
      background: #e5e5e5;
    }
    .vh-btn-secondary {
      border: 1px solid #f5f5f5;
      color: #f5f5f5;
    }
    .vh-btn-secondary:hover {
      background: #f5f5f5;
      color: #000;
    }
    .vh-hero.is-revealed .vh-overlay {
      opacity: 0;
    }
    .vh-hero.is-revealed .vh-inner {
      opacity: 1;
      transform: translateY(0);
    }
    .vh-hero.is-playing .vh-video {
      opacity: 1;
    }
    .vh-hero[data-reduced="1"] .vh-video {
      opacity: 0;
    }
    .vh-hero[data-reduced="1"] .vh-overlay {
      opacity: 1;
    }
    .vh-hero[data-reduced="1"] .vh-inner {
      opacity: 1;
      transform: translateY(0);
    }
    @media (prefers-reduced-motion: reduce) {
      .vh-video,
      .vh-overlay,
      .vh-inner {
        transition: none;
      }
    }
  </style>
</section>
